if(!DataBind)var DataBind={};!function(e,t){e.fn.defaultBindingType=function(){var e=this.prop("tagName");return"input"===e.toLowerCase()?"button"===this.attr("type").toLowerCase()?"onclick":"value":"img"===e.toLowerCase()?"src":"html"}}(jQuery,DataBind),function(e,t){t.createBinding=function(e,t,n,i,a){var r={model:e.model,ctrl:e,element:t,key:n,bindingId:a};return"value"===i?(t.on("input propertychange paste",function(){if(model.elementChanged){var i=model.elementChanged.call(model,n,t.val());if(!i){model[n]=t.val();var r=Object.keys(e.bindings);r.forEach(function(t){var n=e.bindings[t];n.bindingId!=a&&n.updateElement()})}}}),Object.defineProperty(r,"elementValue",{get:function(){return this.element.val()},set:function(e){this.element.val(e)}})):"html"===i?Object.defineProperty(r,"elementValue",{get:function(){return this.element.html()},set:function(e){this.element.html(e)}}):"src"===i?Object.defineProperty(r,"elementValue",{get:function(){return this.element.attr("src")},set:function(e){this.element.attr("src",e)}}):"onclick"===i&&(r.elementValue="",r.propertyValue="",t.click(function(){model[n].call(model)})),"onclick"!=i&&Object.defineProperty(r,"propertyValue",{get:function(){return this.ctrl.model[this.key]},set:function(e){this.ctrl.model[this.key]=e}}),r.updateElement=function(){this.elementValue=this.propertyValue},r.updateProperty=function(){this.propertyValue=this.elementValue},r},t.addBinding=function(e,n){var i,a,r,o;r=t.nextBindingId++,n.attr("data-binding-id",r),i=n.attr("data-bind"),o=n.defaultBindingType(),a=t.createBinding(e,n,i,o,r),e.bindings[r]=a,t.bindings[r]=a},t.createBindings=function(n){e(n.view).find("[data-bind]").each(function(){t.addBinding(n,e(this))})},t.releaseBindings=function(e){}}(jQuery,DataBind),function(e,t){}(jQuery,DataBind),function(e,t){t.makeObjectObservable=function(e){var t,n=function(e,t,n){this.onPropertyChanged&&this.onPropertyChanged.call(this,e,t,n)};e["private"]=function(){return this._private||(this._private={}),this._private},e["private"]().onPropertyChanged=function(t,i,a){n.call(e,t,i,a)},t=Object.keys(e),t.forEach(function(t){"function"!=typeof e[t]&&(t.startsWith("_")||(console.log(t),e["private"]()[t]=e[t],Object.defineProperty(e,t,{get:function(){return this["private"]()[t]},set:function(e){n(t,e,this["private"]()[t]),this["private"]()[t]=e}})))})}}(jQuery,DataBind),function(e,t){t.nextBindingId=0,t.bindings={},t.updateView=function(e){console.log("updateView");var t=Object.keys(e.bindings);t.forEach(function(t){var n=e.bindings[t];n.updateElement()})},t.updateModel=function(e){console.log("updateModel");var t=Object.keys(e.bindings);t.forEach(function(t){var n=e.bindings[t];n.updateProperty()})},t.dataBind=function(e,n){var i={};i.model=e,i.view=n,i.bindings={},t.createBindings(i),t.makeObjectObservable(e),e.controller=function(){return i},e.updateView=function(){t.updateView(this.controller())},e.updateModel=function(){t.updateModel(this.controller())},e.releaseBindings=function(){t.releaseBindings(this.controller())}},e.fn.dataBind=function(e){return t.dataBind(e,this),this}}(jQuery,DataBind);